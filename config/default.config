import nextflow.util.SysHelper

params {
    _DEFAULT_NONCODING_PEPTIDES = '_NO_FILE_NONCODING'
    _DEFAULT_ALT_TRANSLATION_PEPTIDES = '_NO_FILE_ALT_TRANSLATION'

    max_cpus   = SysHelper.getAvailCpus()
    max_memory = SysHelper.getAvailMemory()
    ucla_cds = true

    mopepgen_version = 'dev'
    docker_image_moPepGen = "ghcr.io/uclahs-cds/mopepgen:${params.mopepgen_version}"
    noncoding_peptides = params._DEFAULT_NONCODING_PEPTIDES
    alt_translation_peptides = params._DEFAULT_ALT_TRANSLATION_PEPTIDES
    split_fasta = true
    filter_fasta = false
    encode_fasta = false
    decoy_fasta = false
    save_intermediate_files = false
    database_processing_modes = []
    process_unfiltered_fasta = null
}

docker {
    enabled = true
    // Pass user's UID/GID and group IDs to Docker
    uid_and_gid = "-u \$(id -u):\$(id -g)"
    all_group_ids = "\$(for i in `id --real --groups`; do echo -n \"--group-add=\$i \"; done)"

    runOptions = "${uid_and_gid} ${all_group_ids}"
}

process {
    executor = 'local'
    echo = true
}
